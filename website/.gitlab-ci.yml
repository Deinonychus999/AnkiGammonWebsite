# GitLab Pages deployment configuration for AnkiGammon website
# This file enables automatic deployment to GitLab Pages

pages:
  stage: deploy
  script:
    # Ensure public directory exists
    - echo "Deploying AnkiGammon landing page to GitLab Pages..."

    # The public/ directory already contains our site
    # GitLab Pages automatically serves from the public/ artifact

  artifacts:
    paths:
      - public
    expire_in: never

  # Only deploy from the main branch
  only:
    - main
    - master

# Optional: Add a test job to validate HTML
validate:
  stage: test
  script:
    - echo "Validating HTML structure..."
    - test -f public/index.html
    - echo "✓ index.html exists"
    - test -d public/assets
    - echo "✓ assets directory exists"
    - echo "Validation complete!"
  only:
    - main
    - master
    - merge_requests
